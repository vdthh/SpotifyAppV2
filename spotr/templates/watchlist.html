{% extends 'base.html' %}

{% block title %} 
    Watchlist
{% endblock %}

<br>

{% block content %}

<div class="container">
    <div class="row">
        <div class="col">
            <h5>Search items</h5>

            <!-- nav bar buttons -->
            <ul class="nav nav-tabs" id="tabcol" role="tablist">
                <li class="nav-item" role="role-artist">
                <button class="nav-link {{ showArtistBtn }}" id="artist-tab" data-bs-toggle="tab" data-bs-target="#artist" type="button" role="tab" aria-controls="artist" aria-selected="true">Artist</button>
                </li>
                <li class="nav-item" role="presentation">
                <button class="nav-link {{ showPlaylistBtn }}" id="playlist-tab" data-bs-toggle="tab" data-bs-target="#playlist" type="button" role="tab" aria-controls="playlist" aria-selected="false">Playlist</button>
                </li>
                <li class=-nav-item role="presentation">
                <button class="nav-link {{ showUserBtn }}" id="user-tab" data-bs-toggle="tab" data-bs-target="#user" type="button" role="tab" aria-controls="user" aria-selected="false">User</button>
                </li>
            </ul>

            <!-- nav tab content -->
            <div class="tab-content" id="tabcolcontent">

                <!-- Search artist tab -->
                <div class="tab-pane fade {{ showArtistTab }}" id="artist" role="tabpanel" aria-labelledby="artist-tab">
                    <br>
                    <h6>Search for artist name</h6>
                    <form method="post" required>
                      <div class="input-group mb-1">
                        <button class="btn btn-outline-secondary bg-dark" type="submit" id="searchartist_btn" name="artist_search">Search</button>
                        <input type="text" class="form-control" id="searchartistinput" name="searchartistinput" placeholder="Enter artist name" required>
                      </div>                                 
                    </form>
                    <br>
                    <div style="height:800px;overflow:auto;">
                      {% if artistList %}
                        {% if artistList|length != 0 %}
                          <h6>Searched for '{{ searchTerm }}':</h6>
                          <table class="table table-striped table-hover table-sm table-responsive">
                            <tr>
                              <th>Name</th>
                              <th>ID</th>
                              <th>Popularity</th>
                            </tr>
                            {% for item in artistList %}    <!-- {artist: artist, id: id, image: image} -->
                              <tr>
                                <td><a class="btn btn-primary" href="/watchlist?addArtist={{ item.id }}" role="button">+</a></td>
                                {% if item.image != "" %}
                                  <td><img src="{{ item.image }}" class="img-thumbnail" style="width:100px;height:100px" alt="image_{{ item.artist }}"></td>
                                {% else %}
                                  <td><p style="font-style: italic !important;">no pic</p></td>
                                {% endif %}
                                <td>{{ item.artist }}</td>
                                <td>{{ item.id }}</td>
                              </tr>
                            {% endfor %}
                          </table>
                        {% endif %}

                        <br>

                        <!-- Search artist tab - pagination -->
                        <div class="div_search_pagination">
                          {% if artistList|length > 1 %}
                              <nav aria-label="Page navigation">
                                  <ul class="pagination">
                                      {% if tot > lim %}
                                           <!-- prev -->
                                          {% if offs !=0 %}
                                          <li class="page-item"><a class="page-link" href="/watchList?offs={{ offs - lim }}&lim={{ lim }}&searchTerm={{ searchTerm }}&searchType={{ searchType }}">Previous</a></li>
                                          {% endif %}
                      
                                          <!-- page numbers -->
                                          {% if offs == 0 %}
                                              <li class="page-item active"><a class="page-link" href="/watchlist?offs={{ offs }}&lim={{ lim }}&searchTerm={{ searchTerm }}&searchType={{ searchType }}">1</a></li>
                                              <li class="page-item"><a class="page-link" href="/watchlist?offs={{ lim }}&lim={{ lim }}&searchTerm={{ searchTerm }}&searchType={{ searchType }}">2</a></li>
                                              <li class="page-item"><a class="page-link" href="/watchlist?offs={{ 2*lim }}&lim={{ lim }}&searchTerm={{ searchTerm }}&searchType={{ searchType }}">3</a></li>
                                          {% else %}
                                              <li class="page-item"><a class="page-link" href="/watchlist?offs={{ offs - lim }}&lim={{ lim }}&searchTerm={{ searchTerm }}&searchType={{ searchType }}">{{ offs // lim }}</a></li>
                                              <li class="page-item active"><a class="page-link" href="/watchlist?offs={{ offs }}&lim={{ lim }}&searchTerm={{ searchTerm }}&searchType={{ searchType }}">{{ (offs + lim) // lim }}</a></li>
                                              {% if (offs + lim) < tot %}
                                                <li class="page-item"><a class="page-link" href="/watchlist?offs={{ offs + lim }}&lim={{ lim }}&searchTerm={{ searchTerm }}&searchType={{ searchType }}">{{ (offs + (2*lim)) // lim }}</a></li>
                                              {% endif %}
                                          {% endif %}
                      
                                          <!-- next -->
                                          {% if (offs + lim) < tot %}
                                              <li class="page-item"><a class="page-link" href="/watchlist?offs={{ offs + lim }}&lim={{ lim }}&searchTerm={{ searchTerm }}&searchType={{ searchType }}">Next</a></li>
                                          {% endif %}
                                      {% endif %}
                                  </ul>
                              </nav>
                              <p class="text-left mt-3">
                                  {% if tot % lim == 0 %}
                                      Showing page {{ (offs // lim) + 1 }} of {{ tot // lim }} - total {{ tot }} results for {{ searchType }}s '{{ searchTerm }}'
                                  {% else %}
                                      Showing page {{ (offs // lim) + 1 }} of {{ (tot // lim) + 1 }} - total {{ tot }} results for {{ searchType }}s '{{ searchTerm }}'
                                  {% endif %}
                              </p>
                          {% endif %}




                      {% endif %}
                    </div>


        
                  </div>




            </div>

        </div>

    </div>

</div>


{% endblock %}